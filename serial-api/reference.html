<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Serial Commands | RelayKeys Docs</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="manifest" href="/RelayKeys/site.webmanifest">
    <link rel="mask-icon" href="/RelayKeys/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" type="image/x-icon" href="/RelayKeys/favicon.ico">
    <link rel="apple-touch-icon" type="image/x-icon" sizes="180x180" href="/RelayKeys/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/RelayKeys/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/RelayKeys/favicon-16x16.png">
    <meta name="description" content="Emulate a Keyboard and Mouse with a computer">
    <meta name="application-name" content="RelayKeys Docs">
    <meta name="theme-color" content="#263238">
    <meta name="apple-mobile-web-app-title" content="Directus Docs">
    <meta name="msapplication-TileColor" content="#263238">
    <meta name="msapplication-config" content="/browserconfig.xml">
    
    <link rel="preload" href="/RelayKeys/assets/css/0.styles.99636053.css" as="style"><link rel="preload" href="/RelayKeys/assets/js/app.4e4d4d42.js" as="script"><link rel="preload" href="/RelayKeys/assets/js/2.6ef3ed40.js" as="script"><link rel="preload" href="/RelayKeys/assets/js/26.dc4ae375.js" as="script"><link rel="prefetch" href="/RelayKeys/assets/js/10.d9476cfd.js"><link rel="prefetch" href="/RelayKeys/assets/js/11.e8ba65c0.js"><link rel="prefetch" href="/RelayKeys/assets/js/12.97121080.js"><link rel="prefetch" href="/RelayKeys/assets/js/13.655ceeaa.js"><link rel="prefetch" href="/RelayKeys/assets/js/14.bda95b96.js"><link rel="prefetch" href="/RelayKeys/assets/js/15.c5c173b1.js"><link rel="prefetch" href="/RelayKeys/assets/js/16.ee60ec9a.js"><link rel="prefetch" href="/RelayKeys/assets/js/17.3721444e.js"><link rel="prefetch" href="/RelayKeys/assets/js/18.d8536204.js"><link rel="prefetch" href="/RelayKeys/assets/js/19.26581eba.js"><link rel="prefetch" href="/RelayKeys/assets/js/20.f964d2ff.js"><link rel="prefetch" href="/RelayKeys/assets/js/21.6c542ca7.js"><link rel="prefetch" href="/RelayKeys/assets/js/22.73e398e9.js"><link rel="prefetch" href="/RelayKeys/assets/js/23.151a14af.js"><link rel="prefetch" href="/RelayKeys/assets/js/24.07cc3d44.js"><link rel="prefetch" href="/RelayKeys/assets/js/25.35e9ddda.js"><link rel="prefetch" href="/RelayKeys/assets/js/3.9b8c371e.js"><link rel="prefetch" href="/RelayKeys/assets/js/4.a6107842.js"><link rel="prefetch" href="/RelayKeys/assets/js/5.8f4b491f.js"><link rel="prefetch" href="/RelayKeys/assets/js/6.56a1ded7.js"><link rel="prefetch" href="/RelayKeys/assets/js/7.783ad4b0.js"><link rel="prefetch" href="/RelayKeys/assets/js/8.799cf335.js"><link rel="prefetch" href="/RelayKeys/assets/js/9.7ee384ca.js">
    <link rel="stylesheet" href="/RelayKeys/assets/css/0.styles.99636053.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/RelayKeys/" class="home-link router-link-active"><img src="/RelayKeys/img/AceLogo.png" alt="RelayKeys Docs" class="logo"> <span class="site-name can-hide">RelayKeys Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://acecentre.org.uk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  AceCentre
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/acecentre/relaykeys" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://acecentre.org.uk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  AceCentre
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/acecentre/relaykeys" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>‚å®Ô∏è Getting Started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/RelayKeys/getting-started/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/RelayKeys/getting-started/installation.html" class="sidebar-link">Installation</a></li><li><a href="/RelayKeys/getting-started/supporting-relaykeys.html" class="sidebar-link">Supporting RelayKeys</a></li><li><a href="/RelayKeys/getting-started/troubleshooting.html" class="sidebar-link">Troubleshooting</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>üìñ AAC Integration Guides</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>üöÄ Command Line Interface (CLI) Details</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>ü•º Serial Bus API details</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/RelayKeys/serial-api/reference.html" aria-current="page" class="active sidebar-link">Serial Commands</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/RelayKeys/serial-api/reference.html#serial-commands" class="sidebar-link">Serial Commands</a></li><li class="sidebar-sub-header"><a href="/RelayKeys/serial-api/reference.html#connection-baud-rate-nr-vid-settings" class="sidebar-link">Connection - Baud rate, nr/vid settings</a></li><li class="sidebar-sub-header"><a href="/RelayKeys/serial-api/reference.html#mouse-and-keyboard-commands" class="sidebar-link">Mouse and Keyboard commands</a></li><li class="sidebar-sub-header"><a href="/RelayKeys/serial-api/reference.html#connection-commands" class="sidebar-link">Connection commands</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>‚ö°Ô∏è Development Guide</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="serial-commands"><a href="#serial-commands" class="header-anchor">#</a> Serial Commands</h2> <p>So if you want to communicate directly with the serial device - instead of via the RPC daemon you can.</p> <h2 id="connection-baud-rate-nr-vid-settings"><a href="#connection-baud-rate-nr-vid-settings" class="header-anchor">#</a> Connection - Baud rate, nr/vid settings</h2> <ul><li>Baud rate should be 115200</li> <li>Hardware flow control CTS/RTS on</li> <li>nrfVID = '239A'</li> <li>nrfPID = '8029'</li></ul> <p>Then you send and receive commands over Serial. The following is a list of the commands and what you should expect to receive back</p> <h2 id="mouse-and-keyboard-commands"><a href="#mouse-and-keyboard-commands" class="header-anchor">#</a> Mouse and Keyboard commands</h2> <h3 id="at-blekeyboardcode-keyboardcode"><a href="#at-blekeyboardcode-keyboardcode" class="header-anchor">#</a> AT+BLEKEYBOARDCODE=KeyboardCode</h3> <p>The good thing about RelayKeys is that we dont try and send actual characters - we send actual keys. This is good - as it means we dont deal with the multilingual problems and different keyboard maps. However - it does mean the the command to send and press a keyboard key can look a little daunting. Here is what it looks like.</p> <p><code>AT+BLEKEYBOARDCODE=02-00-00-00-00-00-00-00</code></p> <p>This is pretty standard stuff when it comes to a keyboard HID code. E.g. <a href="https://www.usb.org/sites/default/files/documents/hut1_12v2.pdf" target="_blank" rel="noopener noreferrer">look at this<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to see what its all about. In short though:</p> <div class="language- extra-class"><pre><code>    Byte 0: Keyboard modifier bits (SHIFT, ALT, CTRL etc)
    Byte 1: reserved
    Byte 2-7: Up to six keyboard usage indexes representing the keys that are 
              currently &quot;pressed&quot;. 
              Order is not important, a key is either pressed (present in the 
              buffer) or not pressed.
</code></pre></div><p>The letter &quot;a&quot; is usage code 0x04 for example. If you want an uppercase &quot;A&quot;, then you would also need to set the Byte 0 modifier bits to select &quot;Left Shift&quot; (or &quot;Right Shift&quot;).</p> <p>Hint: <a href="https://github.com/AceCentre/RelayKeys/blob/69fffd89cf5ace9ee74ed6bc4fe958bff4fb3db2/blehid.py#L222" target="_blank" rel="noopener noreferrer">Look at this file for a way to format this nicely<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="at-blehidmousemove-mousemovex-mousemovey-0-0"><a href="#at-blehidmousemove-mousemovex-mousemovey-0-0" class="header-anchor">#</a> AT+BLEHIDMOUSEMOVE=MouseMoveX,MouseMoveY,0,0</h3> <p><code>AT+BLEHIDMOUSEMOVE=X,Y,WY,WX</code></p> <ul><li>X = Right Pixels</li> <li>Y = Down pixels</li> <li>WY = Scroll Down</li> <li>WX = Scroll Right</li></ul> <p>MouseMoveX = Pixels RIGHT and MouseMoveY = Pixels DOWN. So to go RIGHT/UP = use negative numbers.</p> <p>e.g. This moves it Right by 10 and Down by 10</p> <p><code>AT+BLEHIDMOUSEMOVE=10,10,0,0</code></p> <h3 id="at-blehidmousebutton-mousebutton"><a href="#at-blehidmousebutton-mousebutton" class="header-anchor">#</a> AT+BLEHIDMOUSEBUTTON=MouseButton</h3> <p><code>AT+BLEHIDMOUSEBUTTON=Button[,Action]</code></p> <p>Button is one of</p> <ul><li>l = Left</li> <li>r= Right</li> <li>m=Middle</li> <li>b=Mouse backward</li> <li>f=Mouse forward</li></ul> <p>NB: Mouse backward and forward are not available functions on all Operating Systems</p> <p>Action is</p> <ul><li>Click</li> <li>Doubleclick</li> <li>O (which acts as press/release toggle)</li></ul> <p>e.g.</p> <p><em>Single click:</em></p> <div class="language- extra-class"><pre><code>AT+BLEHIDMOUSEBUTTON=l,click
</code></pre></div><p><em>Double click:</em></p> <div class="language- extra-class"><pre><code>AT+BLEHIDMOUSEBUTTON=l,doubleclick
</code></pre></div><h2 id="connection-commands"><a href="#connection-commands" class="header-anchor">#</a> Connection commands</h2> <h3 id="at-bleaddnewdevice"><a href="#at-bleaddnewdevice" class="header-anchor">#</a> AT+BLEADDNEWDEVICE</h3> <p>Adds a new device to the cached list of devices.  After giving this AT command the user should connect with the board via BLE. If connection is successful then the device's name will be added into the list and the board will connect with the device.</p> <p>Note: A user can only add a new device if the cached list is not full. If the list is full then the board will return with an <code>Error</code>. If no new device connects with the board till the timeout (set to 30 seconds), a <code>Timeout Error</code> will be returned.</p> <h3 id="at-bleremovedevice-device-name"><a href="#at-bleremovedevice-device-name" class="header-anchor">#</a> AT+BLEREMOVEDEVICE=&quot;DEVICE_NAME&quot;</h3> <p>This AT command will remove said device's name from the cached list. Device's name should be written between double quotes. You have to be exact with this!  If <code>device_name</code> is not found in the list, then the board will return with an <code>Error</code>.</p> <p>If <code>device_name</code> is currently connected to a BLE device, then the board will disconnect from this device and then remove device's name from the list.</p> <h3 id="at-blecurrentdevicename"><a href="#at-blecurrentdevicename" class="header-anchor">#</a> AT+BLECURRENTDEVICENAME</h3> <p>This AT command will return the currently connected BLE device's name. If the board is not connected with any BLE device then it will return <code>NONE</code>.</p> <h3 id="at-switchconn"><a href="#at-switchconn" class="header-anchor">#</a> AT+SWITCHCONN</h3> <p>This AT command will switch the  BLE connection to the next device in the cached list.
The board will try to connect with the next listed device till the timeout, then <code>Timeout Error</code> will be returned and the board will try to connect with the next  device listed in the cache.. and so on..</p> <h3 id="at-printdevlist"><a href="#at-printdevlist" class="header-anchor">#</a> AT+PRINTDEVLIST</h3> <p>This AT command will return a list of device names.</p> <h3 id="at-blemaxdevlistsize-number"><a href="#at-blemaxdevlistsize-number" class="header-anchor">#</a> AT+BLEMAXDEVLISTSIZE=NUMBER</h3> <p>This AT command will change the maximum number of BLE devices possible in the cached list.
The number should be greater than 0 and less then 15</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/acecentre/relaykeys/edit/master/docs/serial-api/reference.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/21/2021, 2:52:52 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ‚Üê
      <a href="/RelayKeys/cli/reference.html" class="prev">
        Command Line flags
      </a></span> <span class="next"><a href="/RelayKeys/developers/architecture.html">
        Architecture and Getting started
      </a>
      ‚Üí
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/RelayKeys/assets/js/app.4e4d4d42.js" defer></script><script src="/RelayKeys/assets/js/2.6ef3ed40.js" defer></script><script src="/RelayKeys/assets/js/26.dc4ae375.js" defer></script>
  </body>
</html>
